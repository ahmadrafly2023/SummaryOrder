<!DOCTYPE html>
<html lang="id" data-theme="light">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kawal Summary Order (witel)</title>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=Syne:wght@400;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="styles.css">
</head>
<body>

<!-- TOP BAR -->
<div class="topbar">
  <div class="topbar-logo">
    <span>‚ö°</span>
    Kawal Summary Order (witel)
  </div>
  <div class="topbar-actions">
    <button class="theme-toggle" onclick="toggleTheme()" title="Toggle Dark Mode" id="themeBtn">üåô</button>
  </div>
</div>

<!-- MAIN -->
<div class="main">

  <!-- STEP 1 & 2 -->
  <div class="step-grid">
    <div class="card">
      <div class="card-header">
        <span class="step-badge">STEP 1</span>
        <span class="card-title">Paste Data Input</span>
      </div>
      <textarea id="dataInput" placeholder="WITEL: AMBON
Total INDIBIZ: 3 | Total WMS: 0
1002201702 | MSH | TKHELMI | Provisioning Issued | INDIBIZ | 16
1002214876 | TUA | PT. THAVA CIPTA SEJAHTERA | Provisioning Issued | INDIBIZ | 10
1002216257 | TUA | PT THAVA CIPTA SEJAHTERA | Provisioning Issued | INDIBIZ | 9">WITEL: AMBON
Total INDIBIZ: 3 | Total WMS: 0
1002201702 | MSH | TKHELMI | Provisioning Issued | INDIBIZ | 16
1002214876 | TUA | PT. THAVA CIPTA SEJAHTERA | Provisioning Issued | INDIBIZ | 10
1002216257 | TUA | PT THAVA CIPTA SEJAHTERA | Provisioning Issued | INDIBIZ | 9</textarea>
      <div style="margin-top:10px;">
        <button class="btn btn-primary" style="width:100%" onclick="generateTable()">‚ö° Generate Tabel Update</button>
      </div>
    </div>

    <div class="card">
      <div class="card-header">
        <span class="step-badge" style="background:var(--text2)">DEFAULT</span>
        <span class="card-title">Nilai Default (fallback)</span>
      </div>
      <div class="defaults-grid">
        <div class="input-group">
          <label>Status Work</label>
          <input type="text" id="defStatus" value="STARTWORK">
        </div>
        <div class="input-group">
          <label>Unit</label>
          <input type="text" id="defUnit" value="TIF FBB FFM DISTRICT SUMALUT">
        </div>
        <div class="input-group">
          <label>Ancreaw Template</label>
          <input type="text" id="defAncreaw" value="AMCREW_{STO}_3">
        </div>
        <div class="input-group">
          <label>Summary</label>
          <input type="text" id="defSummary" value="Pull Drop Core">
        </div>
        <div class="input-group">
          <label>Log</label>
          <input type="text" id="defLog" value="-">
        </div>
      </div>
    </div>
  </div>

  <!-- STEP 2 - GENERATED TABLE -->
  <div class="card generate-table-card" id="genTableCard">
    <div class="card-header">
      <span class="step-badge" style="background:var(--green)">STEP 2</span>
      <span class="card-title">Edit Data Update ‚Äî <span id="orderCountLabel">0</span> Order Ditemukan</span>
    </div>
    <div class="order-table-wrap">
      <table>
        <thead>
          <tr>
            <th>#</th>
            <th>No Order</th>
            <th>STO</th>
            <th>Nama</th>
            <th>Tipe</th>
            <th>Hari</th>
            <th>Status Work</th>
            <th>Unit</th>
            <th>Ancreaw</th>
            <th>Summary</th>
            <th>Log</th>
          </tr>
        </thead>
        <tbody id="orderTableBody"></tbody>
      </table>
    </div>
    <div style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap;">
      <button class="btn btn-primary" onclick="prosesData()">üìä Proses & Lihat Hasil</button>
      <button class="btn btn-ghost" onclick="applyDefaultAll()">üîÑ Reset Semua ke Default</button>
    </div>
  </div>

  <!-- ACTION BAR -->
  <div class="action-bar" id="actionBar" style="display:none">
    <button class="btn btn-danger" onclick="clearAll()">üóëÔ∏è Clear Semua</button>
  </div>

  <!-- RESULTS -->
  <div class="card results-card" id="resultsCard">
    <div class="results-header">
      <span class="results-title">üìä Hasil Output</span>
      <div style="display:flex;gap:10px;flex-wrap:wrap;">
        <button class="btn btn-success" onclick="copyAll()">üìã Copy Semua</button>
        <button class="btn btn-ghost" onclick="downloadTxt()">‚¨áÔ∏è Download .txt</button>
        <button class="btn btn-danger" onclick="clearAll()">üóëÔ∏è Clear</button>
      </div>
    </div>

    <div class="stats-row" id="statsRow"></div>

    <div class="search-row">
      <input type="text" class="search-input" id="searchInput" placeholder="üîç  Cari order, nama, STO, status..." oninput="filterResults()">
      <button class="pill-btn" id="filterAll" onclick="setFilter('all')" style="background:var(--accent);color:#fff;border-color:var(--accent)">Semua</button>
      <button class="pill-btn" id="filterCustom" onclick="setFilter('custom')">Custom</button>
      <button class="pill-btn" id="filterDefault" onclick="setFilter('default')">Default</button>
    </div>

    <div class="result-table-wrap">
      <table id="resultTable">
        <thead>
          <tr>
            <th>#</th>
            <th>Tipe</th>
            <th>No Order</th>
            <th>STO</th>
            <th>Nama</th>
            <th>Status Prov</th>
            <th>Tipe Order</th>
            <th>Hari</th>
            <th>Status Work</th>
            <th>Unit</th>
            <th>Ancreaw</th>
            <th>Summary</th>
            <th>Log</th>
          </tr>
        </thead>
        <tbody id="resultBody"></tbody>
      </table>
    </div>

    <!-- Raw output hidden (used for copy/download) -->
    <pre id="rawOutput" style="display:none"></pre>
  </div>
</div>

<!-- TOAST -->
<div class="toast" id="toast"></div>

<script src="script.js"></script>
</body>
</html>
